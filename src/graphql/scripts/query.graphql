query RewardsTransactions(
  $stakingRewards: ID!
  $start: Int!
  $end: Int!
  $block: Block_height
) @api(name: mstable) {
  stakingRewardsContracts(where: { id: $stakingRewards }, block: $block) {
    lastUpdateTime
    periodFinish
    rewardPerTokenStored
    rewardRate
    totalSupply

    platformToken {
      symbol
    }

    stakingRewards(where: { type: REWARD }, first: 1000) {
      amount
      account
      amountPerTokenPaid
    }

    stakingBalances(first: 1000) {
      amount
      account
    }

    claimRewardTransactions(
      first: 1000
      orderBy: timestamp
      orderDirection: asc
      where: { timestamp_gt: $start, timestamp_lt: $end }
    ) {
      amount
      sender
    }
  }
}

query AllRewardsTransactions(
  $pools: [ID!]!
  $start: Int!
  $end: Int!
  $block: Block_height
  $limit: Int!
  $offset: Int!
) @api(name: mstable) {
  stakingRewardsContracts(where: { id_in: $pools }, block: $block) {
    address: id
    lastUpdateTime
    periodFinish
    rewardPerTokenStored
    rewardRate
    totalSupply

    stakingRewards(where: { type: REWARD }, first: $limit, skip: $offset) {
      stakingRewardsContract { id }
      amount
      account
      amountPerTokenPaid
    }

    stakingBalances(first: $limit, skip: $offset) {
      stakingRewardsContract { id }
      amount
      account
    }

    claimRewardTransactions(
      first: $limit
      skip: $offset
      orderBy: timestamp
      orderDirection: asc
      where: { timestamp_gt: $start, timestamp_lt: $end }
    ) {
      stakingRewardsContract { id }
      amount
      sender
    }
  }
}
